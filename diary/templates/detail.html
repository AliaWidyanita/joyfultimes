{% extends 'base.html' %}
{% load static %}

{% block content %}

<div class="container mt-5" id="content">
    <h1 id="title"></h1>
    <h6 class="opacity-50" id="date"></h6>
    <hr>
    <div id="body-div" style="margin-bottom: 50px;"></div>

    <div style="margin:0px 0px 0px 0px">
        <a href="{% url 'diary:show_diary'%}" style="cursor: pointer;"><button type="button" class="btn btn-secondary">Back</button></a>
        <a href="{% url 'diary:edit' id %}" style="cursor: pointer;"><button type="button" class="btn btn-primary" style="margin: 0px 20px 0px 5px;">Edit</button></a>
        <a href="{% url 'diary:delete' id %}">
            <i class="fa-solid fa-trash" style="color:#D11A2A"></i>
        </a>
    </div>
    
</div>




<script>
    const obj = JSON.parse("{{ item|escapejs }}");
    var date = "{{ date|date:'D, d M Y H:i' }}"
    document.getElementById("title").innerHTML = obj[0].fields.title;
    document.getElementById("date").innerHTML = "Last modified at " + date;

    var rawText = obj[0].fields.body;
    var arr = rawText.split("\n");
    arr.forEach(element => {
        if (element != "\r") {
            document.getElementById("body-div").insertAdjacentHTML("beforeend", "<p>"+ element + "</p>");
        }
    });
</script>

{% endblock content %}